// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/go-kratos/kratos/v2"
	"github.com/tx7do/kratos-bootstrap/bootstrap"
	"go-wind-admin/app/admin/service/internal/data"
	"go-wind-admin/app/admin/service/internal/server"
	"go-wind-admin/app/admin/service/internal/service"
)

// Injectors from wire.go:

// initApp 初始化 kratos 应用的 Wire provider 入口。
// initApp initializes the Wire provider entry for the kratos application.
//
// 参数 / Parameters:
//   - *bootstrap.Context: 引导上下文 / *bootstrap.Context: bootstrap context
//
// 返回 / Returns:
//   - *kratos.App: 已构建的应用实例 / *kratos.App: constructed application instance
//   - func(): 应用关闭时的清理函数 / func(): cleanup function to run on shutdown
//   - error: 构建过程中可能发生的错误 / error: possible construction error
func initApp(context *bootstrap.Context) (*kratos.App, func(), error) {
	authenticator := data.NewAuthenticator(context)
	entClient, cleanup, err := data.NewEntClient(context)
	if err != nil {
		return nil, nil, err
	}
	rolePermissionRepo := data.NewRolePermissionRepo(context, entClient)
	permissionApiRepo := data.NewPermissionApiRepo(context, entClient)
	permissionMenuRepo := data.NewPermissionMenuRepo(context, entClient)
	permissionRepo := data.NewPermissionRepo(context, entClient, permissionApiRepo, permissionMenuRepo)
	roleRepo := data.NewRoleRepo(context, entClient, rolePermissionRepo, permissionRepo)
	apiRepo := data.NewApiRepo(context, entClient)
	authorizerProvider := data.NewAuthorizerProvider(context, roleRepo, apiRepo)
	authorizer := data.NewAuthorizer(context, authorizerProvider)
	adminOperationLogRepo := data.NewAdminOperationLogRepo(context, entClient)
	adminLoginLogRepo := data.NewAdminLoginLogRepo(context, entClient)
	userRepo := data.NewUserRepo(context, entClient)
	crypto := data.NewPasswordCrypto()
	userCredentialRepo := data.NewUserCredentialRepo(context, entClient, crypto)
	tenantRepo := data.NewTenantRepo(context, entClient)
	membershipRoleRepo := data.NewMembershipRoleRepo(context, entClient)
	membershipPositionRepo := data.NewMembershipPositionRepo(context, entClient)
	membershipOrgUnitRepo := data.NewMembershipOrgUnitRepo(context, entClient)
	membershipRepo := data.NewMembershipRepo(context, entClient, membershipRoleRepo, membershipPositionRepo, membershipOrgUnitRepo)
	orgUnitRepo := data.NewOrgUnitRepo(context, entClient)
	client, cleanup2, err := data.NewRedisClient(context)
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	userTokenCacheRepo := data.NewUserTokenRepo(context, client, authenticator)
	authenticationService := service.NewAuthenticationService(context, userRepo, userCredentialRepo, roleRepo, tenantRepo, membershipRepo, orgUnitRepo, permissionRepo, userTokenCacheRepo, authenticator)
	positionRepo := data.NewPositionRepo(context, entClient)
	userService := service.NewUserService(context, userRepo, roleRepo, userCredentialRepo, positionRepo, orgUnitRepo, tenantRepo, membershipRepo)
	menuRepo := data.NewMenuRepo(context, entClient)
	menuService := service.NewMenuService(context, menuRepo)
	routerService := service.NewRouterService(context, menuRepo, roleRepo, userRepo)
	orgUnitService := service.NewOrgUnitService(context, orgUnitRepo, userRepo)
	roleService := service.NewRoleService(context, authorizer, roleRepo, membershipOrgUnitRepo, membershipRepo)
	positionService := service.NewPositionService(context, positionRepo, orgUnitRepo)
	dictTypeRepo := data.NewDictTypeRepo(context, entClient)
	dictEntryRepo := data.NewDictEntryRepo(context, entClient)
	dictService := service.NewDictService(context, dictTypeRepo, dictEntryRepo)
	adminLoginLogService := service.NewAdminLoginLogService(context, adminLoginLogRepo)
	adminOperationLogService := service.NewAdminOperationLogService(context, adminOperationLogRepo, apiRepo)
	minIOClient := data.NewMinIoClient(context)
	ossService := service.NewOssService(context, minIOClient)
	uEditorService := service.NewUEditorService(context, minIOClient)
	fileRepo := data.NewFileRepo(context, entClient)
	fileService := service.NewFileService(context, fileRepo)
	tenantService := service.NewTenantService(context, tenantRepo, userRepo, userCredentialRepo)
	taskRepo := data.NewTaskRepo(context, entClient)
	taskService := service.NewTaskService(context, taskRepo, userRepo)
	internalMessageRepo := data.NewInternalMessageRepo(context, entClient)
	internalMessageCategoryRepo := data.NewInternalMessageCategoryRepo(context, entClient)
	internalMessageRecipientRepo := data.NewInternalMessageRecipientRepo(context, entClient)
	sseServer := server.NewSseServer(context)
	internalMessageService := service.NewInternalMessageService(context, internalMessageRepo, internalMessageCategoryRepo, internalMessageRecipientRepo, userRepo, sseServer, userTokenCacheRepo)
	internalMessageCategoryService := service.NewInternalMessageCategoryService(context, internalMessageCategoryRepo)
	internalMessageRecipientService := service.NewInternalMessageRecipientService(context, internalMessageRepo, internalMessageRecipientRepo)
	adminLoginRestrictionRepo := data.NewAdminLoginRestrictionRepo(context, entClient)
	adminLoginRestrictionService := service.NewAdminLoginRestrictionService(context, adminLoginRestrictionRepo)
	userProfileService := service.NewUserProfileService(context, userRepo, userTokenCacheRepo, roleRepo, userCredentialRepo, membershipRepo)
	apiService := service.NewApiService(context, apiRepo, authorizer)
	permissionGroupRepo := data.NewPermissionGroupRepo(context, entClient)
	permissionService := service.NewPermissionService(context, permissionRepo, permissionGroupRepo, menuRepo, apiRepo, authorizer)
	permissionGroupService := service.NewPermissionGroupService(context, permissionGroupRepo, permissionRepo)
	permissionAuditLogRepo := data.NewPermissionAuditLogRepo(context, entClient)
	permissionAuditLogService := service.NewPermissionAuditLogService(context, permissionAuditLogRepo)
	policyEvaluationLogRepo := data.NewPolicyEvaluationLogRepo(context, entClient)
	policyEvaluationLogService := service.NewPolicyEvaluationLogService(context, policyEvaluationLogRepo)
	httpServer, err := server.NewRestServer(context, authenticator, authorizer, adminOperationLogRepo, adminLoginLogRepo, authenticationService, userService, menuService, routerService, orgUnitService, roleService, positionService, dictService, adminLoginLogService, adminOperationLogService, ossService, uEditorService, fileService, tenantService, taskService, internalMessageService, internalMessageCategoryService, internalMessageRecipientService, adminLoginRestrictionService, userProfileService, apiService, permissionService, permissionGroupService, permissionAuditLogService, policyEvaluationLogService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	asynqServer, err := server.NewAsynqServer(context, taskService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	app := newApp(context, httpServer, asynqServer, sseServer)
	return app, func() {
		cleanup2()
		cleanup()
	}, nil
}
