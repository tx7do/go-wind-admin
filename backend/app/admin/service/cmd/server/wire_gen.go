// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/go-kratos/kratos/v2"
	"github.com/tx7do/kratos-bootstrap/bootstrap"
	"go-wind-admin/app/admin/service/internal/data"
	"go-wind-admin/app/admin/service/internal/server"
	"go-wind-admin/app/admin/service/internal/service"
)

// Injectors from wire.go:

// initApp 初始化 kratos 应用的 Wire provider 入口。
// initApp initializes the Wire provider entry for the kratos application.
//
// 参数 / Parameters:
//   - *bootstrap.Context: 引导上下文 / *bootstrap.Context: bootstrap context
//
// 返回 / Returns:
//   - *kratos.App: 已构建的应用实例 / *kratos.App: constructed application instance
//   - func(): 应用关闭时的清理函数 / func(): cleanup function to run on shutdown
//   - error: 构建过程中可能发生的错误 / error: possible construction error
func initApp(context *bootstrap.Context) (*kratos.App, func(), error) {
	authenticator := data.NewAuthenticator(context)
	entClient, cleanup, err := data.NewEntClient(context)
	if err != nil {
		return nil, nil, err
	}
	rolePermissionRepo := data.NewRolePermissionRepo(context, entClient)
	permissionApiRepo := data.NewPermissionApiRepo(context, entClient)
	permissionMenuRepo := data.NewPermissionMenuRepo(context, entClient)
	permissionRepo := data.NewPermissionRepo(context, entClient, permissionApiRepo, permissionMenuRepo)
	roleMetadataRepo := data.NewRoleMetadataRepo(context, entClient)
	roleRepo := data.NewRoleRepo(context, entClient, rolePermissionRepo, permissionRepo, roleMetadataRepo)
	apiRepo := data.NewApiRepo(context, entClient)
	authorizerProvider := data.NewAuthorizerProvider(context, roleRepo, apiRepo)
	authorizer := data.NewAuthorizer(context, authorizerProvider)
	apiAuditLogRepo := data.NewApiAuditLogRepo(context, entClient)
	loginAuditLogRepo := data.NewLoginAuditLogRepo(context, entClient)
	v := server.NewRestMiddleware(context, authenticator, authorizer, apiAuditLogRepo, loginAuditLogRepo)
	userRoleRepo := data.NewUserRoleRepo(context, entClient)
	userOrgUnitRepo := data.NewUserOrgUnitRepo(context, entClient)
	userPositionRepo := data.NewUserPositionRepo(context, entClient)
	membershipRoleRepo := data.NewMembershipRoleRepo(context, entClient)
	membershipPositionRepo := data.NewMembershipPositionRepo(context, entClient)
	membershipOrgUnitRepo := data.NewMembershipOrgUnitRepo(context, entClient)
	membershipRepo := data.NewMembershipRepo(context, entClient, membershipRoleRepo, membershipPositionRepo, membershipOrgUnitRepo)
	userRepo := data.NewUserRepo(context, entClient, userRoleRepo, userOrgUnitRepo, userPositionRepo, membershipRepo)
	crypto := data.NewPasswordCrypto()
	userCredentialRepo := data.NewUserCredentialRepo(context, entClient, crypto)
	tenantRepo := data.NewTenantRepo(context, entClient)
	orgUnitRepo := data.NewOrgUnitRepo(context, entClient)
	client, cleanup2, err := data.NewRedisClient(context)
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	userTokenCacheRepo := data.NewUserTokenRepo(context, client, authenticator)
	authenticationService := service.NewAuthenticationService(context, userRepo, userCredentialRepo, roleRepo, tenantRepo, membershipRepo, orgUnitRepo, permissionRepo, userTokenCacheRepo, authenticator)
	menuRepo := data.NewMenuRepo(context, entClient)
	routerService := service.NewRouterService(context, menuRepo, roleRepo, userRepo)
	dictTypeRepo := data.NewDictTypeRepo(context, entClient)
	dictEntryRepo := data.NewDictEntryRepo(context, entClient)
	dictService := service.NewDictService(context, dictTypeRepo, dictEntryRepo)
	minIOClient := data.NewMinIoClient(context)
	ossService := service.NewOssService(context, minIOClient)
	uEditorService := service.NewUEditorService(context, minIOClient)
	fileRepo := data.NewFileRepo(context, entClient)
	fileService := service.NewFileService(context, fileRepo)
	taskRepo := data.NewTaskRepo(context, entClient)
	taskService := service.NewTaskService(context, taskRepo, userRepo)
	loginPolicyRepo := data.NewLoginPolicyRepo(context, entClient)
	loginPolicyService := service.NewLoginPolicyService(context, loginPolicyRepo)
	tenantService := service.NewTenantService(context, tenantRepo, userRepo, userCredentialRepo, roleRepo, authorizer)
	positionRepo := data.NewPositionRepo(context, entClient)
	userService := service.NewUserService(context, userRepo, roleRepo, userCredentialRepo, positionRepo, orgUnitRepo, tenantRepo, membershipRepo)
	userProfileService := service.NewUserProfileService(context, userRepo, userTokenCacheRepo, roleRepo, userCredentialRepo)
	roleService := service.NewRoleService(context, authorizer, roleRepo, tenantRepo)
	positionService := service.NewPositionService(context, positionRepo, orgUnitRepo)
	orgUnitService := service.NewOrgUnitService(context, orgUnitRepo, userRepo)
	menuService := service.NewMenuService(context, menuRepo)
	apiService := service.NewApiService(context, apiRepo, authorizer)
	permissionGroupRepo := data.NewPermissionGroupRepo(context, entClient)
	permissionService := service.NewPermissionService(context, permissionRepo, permissionGroupRepo, menuRepo, apiRepo, authorizer)
	permissionGroupService := service.NewPermissionGroupService(context, permissionGroupRepo, permissionRepo)
	permissionAuditLogRepo := data.NewPermissionAuditLogRepo(context, entClient)
	permissionAuditLogService := service.NewPermissionAuditLogService(context, permissionAuditLogRepo)
	policyEvaluationLogRepo := data.NewPolicyEvaluationLogRepo(context, entClient)
	policyEvaluationLogService := service.NewPolicyEvaluationLogService(context, policyEvaluationLogRepo)
	loginAuditLogService := service.NewLoginAuditLogService(context, loginAuditLogRepo)
	apiAuditLogService := service.NewApiAuditLogService(context, apiAuditLogRepo, apiRepo)
	operationAuditLogRepo := data.NewOperationAuditLogRepo(context, entClient)
	operationAuditLogService := service.NewOperationAuditLogService(context, operationAuditLogRepo)
	dataAccessAuditLogRepo := data.NewDataAccessAuditLogRepo(context, entClient)
	dataAccessAuditLogService := service.NewDataAccessAuditLogService(context, dataAccessAuditLogRepo)
	internalMessageRepo := data.NewInternalMessageRepo(context, entClient)
	internalMessageCategoryRepo := data.NewInternalMessageCategoryRepo(context, entClient)
	internalMessageRecipientRepo := data.NewInternalMessageRecipientRepo(context, entClient)
	sseServer := server.NewSseServer(context)
	internalMessageService := service.NewInternalMessageService(context, internalMessageRepo, internalMessageCategoryRepo, internalMessageRecipientRepo, userRepo, sseServer, userTokenCacheRepo)
	internalMessageCategoryService := service.NewInternalMessageCategoryService(context, internalMessageCategoryRepo)
	internalMessageRecipientService := service.NewInternalMessageRecipientService(context, internalMessageRepo, internalMessageRecipientRepo)
	httpServer, err := server.NewRestServer(context, v, authorizer, authenticationService, routerService, dictService, ossService, uEditorService, fileService, taskService, loginPolicyService, tenantService, userService, userProfileService, roleService, positionService, orgUnitService, menuService, apiService, permissionService, permissionGroupService, permissionAuditLogService, policyEvaluationLogService, loginAuditLogService, apiAuditLogService, operationAuditLogService, dataAccessAuditLogService, internalMessageService, internalMessageCategoryService, internalMessageRecipientService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	asynqServer, err := server.NewAsynqServer(context, taskService)
	if err != nil {
		cleanup2()
		cleanup()
		return nil, nil, err
	}
	app := newApp(context, httpServer, asynqServer, sseServer)
	return app, func() {
		cleanup2()
		cleanup()
	}, nil
}
